name: 'GitOpsActions - Deploy'
description: 'Propagates version file to the ops repo'
inputs:
  ops-repo-url:
    description: 'The environment (branch) name to propagate version'
    required: true
  target-environment:  # id of input
    description: 'The environment (branch) name to propagate version'
    required: true
    default: 'dev'
  version:
    description: 'The version string to propagate'
    required: true
  version-file-path:
    description: 'The version string to propagate'
    required: true
    default: 'version'
  auto-approve-pr:
    description: 'Propagation is done as a PR. Set if should be approved automatically'
    required: true
    default: true

outputs:
runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
    - ops-repo-ur=${{ inputs.ops-repo-url }}
    - ${{ inputs.target-environment }}
    - ${{ inputs.version }}
    - ${{ inputs.version-file-path }}
    - ${{ auto-approve-pr }}
